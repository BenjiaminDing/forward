<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XMLHttpRequest-查询参数</title>

  <style>
    .kk{
          background-color: #b3d4fc;
    }

    p{
              background-color: #f0ad4e;
    }
  </style>
</head>

<body>

<div  class="kk">
  <h2>XMLHttpRequest-查询参数</h2>
  <p class="city">
    <!-- 城市渲染到这里 -->

  </p>
</div>
  <script>
    /**
     * 需求：通过 XMLHttpRequest 获取某个省份的所有城市，渲染到页面上
    */
    // 1. 创建 XMLHttpRequest对象
    const xhr = new XMLHttpRequest()

    // 2. 设置请求方法 和 请求URL
    let str='http://localhost:8081/product/1'
    // xhr.open('GET', 'http://hmajax.itheima.net/api/city?pname=湖北省')
    xhr.open('GET', str)

    // 3. 监听 loadend 事件，接收响应结果
    xhr.addEventListener('loadend', () => {
      console.log(xhr.response)
      // const  data=xhr.response
      // JSON-JS对象
      const data = JSON.parse(xhr.response)
      // console.log(typeof data)
      // 渲染到页面上
      document.querySelector('.city').innerText = data.pname
    })

    // 4. 发起请求
    xhr.send()

  </script>
</body>

</html>

<!--

针对以上问题，本文提供两种解决方案，CORS中间件和JSONP方法。

在具体介绍解决方法之前，我们先明确以下前提条件：

1、这两个方法都需要通过后端修改接口情况，无法单独通过前端解决跨域问题。

2、什么是跨域？什么情况会出现跨域？

答：当浏览器发起Ajax请求时，如果所请求的url和当前的url的协议、域名、端口存在任意不同，就会产生跨域问题。比如我在这个地址file:///C:/Users/%E8%8A%.html，协议为file协议，如果请求http协议的文件，自然就会出现跨域问题。

3、当我们使用script、img、herf加载内容时不会出现跨域问题
————————————————
版权声明：本文为CSDN博主「芒果mmmmg」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_40756509/article/details/123730126
-->
